{% extends "base.html" %}

{% block extra_styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/messaging/inbox.css') }}">
{% endblock %}

{% block content %}
<div class="messaging">
    <h2>Composer un message</h2>
    <form method="POST" class="compose-form">

        <label>Destinataire :</label>
        <select name="recipient_id" required>
            <option value="">-- SÃ©lectionnez un destinataire --</option>

            {% for role, users in roles_dict.items() %}
                {% if users %}
                    <optgroup label="{{ role.replace('_', ' ').title() }}">
                        {% for u in users %}
                            <option value="{{ u.id }}">{{ u.username }}</option>
                        {% endfor %}
                    </optgroup>
                {% endif %}
            {% endfor %}
        </select>

        <label>Objet :</label>
        <input type="text" name="subject" required>

        <label>Message :</label>
        <textarea name="body" rows="5" required></textarea>

        <button type="submit" class="btn btn-primary">Envoyer</button>
        <a href="{{ url_for('messaging.inbox') }}" class="btn btn-secondary">Annuler</a>
    </form>
</div>
{% endblock %}
